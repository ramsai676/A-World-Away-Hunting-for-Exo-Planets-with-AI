<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExoPlanetHunt | Exoplanet Discovery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --deep-space: #000010;
            --slate-light: #e5e7eb;
            --slate-dark: #1e293b;
            --panel-bg: rgba(15, 23, 42, 0.8);
            --sky-glow: rgba(56, 189, 248, 0.5);
            --magenta-glow: rgba(217, 70, 239, 0.5);
        }
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px; /* Offset for fixed header */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--deep-space);
            color: var(--slate-light);
            overflow-x: hidden;
            cursor: none;
        }
        #interactive-canvas {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
        }
        .custom-cursor {
            position: fixed; width: 40px; height: 40px;
            border: 2px solid rgba(217, 70, 239, 0.7);
            border-radius: 50%; pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease-out, background-color 0.2s ease;
            z-index: 9999;
        }
        .custom-cursor.active { background-color: var(--magenta-glow); }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .ui-panel {
            background: var(--panel-bg);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--slate-dark);
            border-radius: 0.75rem;
            box-shadow: 0 0 40px rgba(0,0,0,0.6);
        }
        .cta-button {
            transition: all 0.3s ease;
            box-shadow: 0 0 20px var(--sky-glow), 0 0 10px var(--magenta-glow) inset;
        }
        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--sky-glow), 0 0 15px var(--magenta-glow) inset;
        }
        .page-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            width: 100%;
        }
        header {
            z-index: 1000;
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            background: rgba(15, 23, 42, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--slate-dark);
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 1s ease-out forwards; }
    </style>
</head>
<body>
    <div class="custom-cursor" id="cursor"></div>
    <canvas id="interactive-canvas"></canvas>
    
    <header>
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center">
                    <a href="#" class="flex-shrink-0">
                        <!-- IMPORTANT: Place your logo file named "logo.png" into the same folder as index.html.
                             Replace or remove this src when you add a different filename.
                             Example: <img id="site-logo" class="h-12 w-12" src="logo.png" alt="ExoPlanetHunt logo"> -->
                        <img id="site-logo" class="h-12 w-12" src="logo.png" alt="ExoPlanetHunt logo" onerror="this.style.opacity=0.0">
                    </a>
                    <div class="ml-4">
                        <span class="font-orbitron text-2xl font-bold text-white">ExoPlanetHunt</span>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main id="ui-container" class="w-full">

        <!-- HERO SECTION -->
        <section class="page-section">
            <div class="text-center fade-in">
                <h1 class="font-orbitron text-5xl md:text-6xl font-black text-white" style="text-shadow: 0 0 15px white, 0 0 25px var(--magenta-glow);">ExoPlanetHunt â€” Explore New Worlds</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-300 max-w-3xl mx-auto">We built an AI-first pipeline that ingests Kepler light-curve metadata, extracts discriminative features and uses a trained deep-learning classifier to score candidates. The platform helps researchers and enthusiasts prioritize observations and learn about exoplanet discovery.</p>
                <a href="#explorer-section" id="launch-scanner-btn" class="cta-button inline-block mt-8 bg-sky-600 text-white font-bold text-xl py-4 px-10 rounded-full">
                    Launch the Explorer
                </a>
            </div>
        </section>

        <!-- INFO SECTIONS -->
        <section class="page-section -mt-24 md:-mt-32">
            <div class="w-full max-w-5xl space-y-8 fade-in">
                <!-- MISSION -->
                <div class="ui-panel p-6">
                    <h2 class="font-orbitron text-3xl text-sky-300 border-b-2 border-sky-300/50 pb-2">The Mission</h2>
                    <div class="grid md:grid-cols-2 gap-6 mt-4">
                        <div>
                            <h3 class="font-bold text-xl text-white">The Problem</h3>
                            <p class="text-gray-300 mt-2">It's hard to manually search for exoplanets in the vast amount of data from NASA's Kepler mission. Sifting through light curves from thousands of stars is a monumental task for humans.</p>
                        </div>
                        <div>
                            <h3 class="font-bold text-xl text-white">Our Solution</h3>
                            <p class="text-gray-300 mt-2">We built an end-to-end AI pipeline that: (1) ingests Kepler metadata and light-curve summaries, (2) computes discriminative features (transit depth, duration, periodicity, SNR and shape metrics), (3) trains a Convolutional Neural Network (CNN) and lightweight ensemble(s) on labeled Kepler examples, and (4) outputs calibrated likelihood scores for three scientific criteria (orbits star, round shape, cleared orbit). The interface surfaces model confidence, interpretable scores and prioritization help so researchers can quickly select targets for follow-up.</p>
                        </div>
                    </div>
                </div>
                <!-- USES -->
                <div class="ui-panel p-6">
                    <h2 class="font-orbitron text-3xl text-fuchsia-300 border-b-2 border-fuchsia-300/50 pb-2">Applications of This Tool</h2>
                    <ul class="mt-4 grid md:grid-cols-3 gap-6">
                        <li><h4 class="font-bold text-lg text-white">Research Acceleration</h4><p class="text-gray-400">Helps astronomers quickly prioritize promising candidates for further study with advanced telescopes.</p></li>
                        <li><h4 class="font-bold text-lg text-white">Educational Resource</h4><p class="text-gray-400">An engaging way for students and the public to learn about exoplanet detection methods.</p></li>
                        <li><h4 class="font-bold text-lg text-white">Citizen Science</h4><p class="text-gray-400">Provides a platform for amateur astronomers to contribute to real scientific discovery.</p></li>
                    </ul>
                </div>
                 <!-- Q&A -->
                 <div class="ui-panel p-6">
                    <h2 class="font-orbitron text-3xl text-emerald-300 border-b-2 border-emerald-300/50 pb-2">Project Q&A</h2>
                    <div class="space-y-4 mt-4">
                        <div class="p-4 bg-slate-900/50 rounded-lg"><p class="font-bold text-white">Q: What data is the AI trained on?</p></div>
                        <div class="p-4 bg-slate-800/50 rounded-lg"><p class="text-gray-300">A: Our model is trained on a vetted dataset from the NASA Kepler mission, containing thousands of labeled light curves classified as 'Confirmed', 'Candidate', or 'False Positive'.</p></div>
                        <div class="p-4 bg-slate-900/50 rounded-lg"><p class="font-bold text-white">Q: What kind of AI model are you using?</p></div>
                        <div class="p-4 bg-slate-800/50 rounded-lg"><p class="text-gray-300">A: We employ a deep learning model, specifically a Convolutional Neural Network (CNN), which is excellent at detecting the subtle, periodic dips in stellar brightness that indicate a potential planetary transit.</p></div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- EXPLORER SECTION -->
        <section id="explorer-section" class="page-section">
             <div class="grid md:grid-cols-5 gap-6 items-start w-full max-w-5xl fade-in">
                <div class="ui-panel p-6 md:col-span-3 text-center">
                    <h2 class="font-orbitron text-2xl text-white">Launch Classifier</h2>
                    <p class="text-gray-400 my-4">Engage the AI model to analyze a new candidate from the Kepler dataset.</p>
                    <a href="classifier.html" id="scan-button" class="cta-button inline-block w-full bg-fuchsia-600 text-white font-bold py-3 px-6 rounded-full">
                        Open Planet Classifier
                    </a>
                </div>
                <div class="ui-panel p-6 md:col-span-2">
                     <h2 class="font-orbitron text-xl text-sky-300 border-b-2 border-sky-300/50 pb-2">Model Performance</h2>
                     <p class="text-5xl font-orbitron font-bold text-white mt-2">97%</p>
                     <p class="text-gray-400">Overall Accuracy</p>
                     <div class="mt-4 h-48"><canvas id="datasetChart"></canvas></div>
                </div>
             </div>
        </section>

        <!-- FOOTER / TEAM SECTION -->
        <footer class="w-full p-8 text-center">
            <div class="ui-panel max-w-lg mx-auto p-6">
                <h2 class="font-orbitron text-2xl text-sky-300">THE PATH FINDERS</h2>
                <ul class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-gray-200">
                    <li>Ram Sai Kandagatla</li>
                    <li>Pavan Tej Mareedu</li>
                    <li>Raga Sri Kulakarni</li>
                    <li>Akshaya Sirigani</li>
                    <li>B. Snehana</li>
                    <li>Misba Sultana</li>
                </ul>
            </div>
        </footer>

    </main>

    <!-- Add: Floating Chatbot UI (bottom-right) -->
    <!-- Chatbot floating button and modal -->
    <div id="chatbot-root" class="fixed bottom-6 right-6 z-50">
        <button id="chat-toggle" class="bg-fuchsia-600 text-white rounded-full w-16 h-16 shadow-lg flex items-center justify-center font-bold">AI</button>
        <div id="chat-panel" class="hidden mt-2 w-80 bg-gray-900/90 text-gray-100 rounded-xl border border-gray-700 shadow-xl p-3">
            <div id="chat-history" style="max-height:320px; overflow:auto;" class="space-y-2 text-sm"></div>
            <div class="mt-3 flex gap-2">
                <input id="chat-input" class="flex-1 bg-gray-800/60 rounded px-3 py-2 text-sm outline-none" placeholder="Ask about the model, dataset or site...">
                <button id="chat-send" class="bg-sky-600 px-3 rounded text-white">Send</button>
            </div>
            <div class="mt-2 text-xs text-gray-400">Tip: Add quick FAQs with "train" format: question|answer</div>
        </div>
    </div>
    
    <script>
    // Persistent, local retrieval chatbot (seeded + editable). Data persisted to localStorage (key: exop_kb).
    (function () {
        const STORAGE_KEY = 'exop_kb_v1';
        const seedKB = [
            {q: "what is exoplanethunt", a: "ExoPlanetHunt is an AI-first tool that analyzes Kepler candidate records and highlights promising exoplanet candidates."},
            {q: "how does it work", a: "We ingest Kepler metadata, extract transit and shape features, train CNN/ensemble models on labeled examples and output calibrated likelihoods for scientific criteria."},
            {q: "what data is used", a: "We use curated Kepler mission metadata and labeled light-curve examples for supervised training; the classifier pages sample those records for demos."},
            {q: "how to add a logo", a: "Place a file named logo.png in the same folder as index.html (or edit the <img id='site-logo' src='...'> to point to your file). A 200Ã—200 PNG or SVG works well."},
            {q: "who created this", a: "Team: Ram Sai Kandagatla; Pavan Tej Mareedu; Raga Sri Kulakarni; Akshaya Sirigani; B. Snehana."},
            {q: "how to extend the bot", a: "Train the bot by sending 'question|answer' in the chat input. New pairs are saved to your browser's localStorage for future visits on this machine."},
            {q: "what features does the site provide", a: "Interactive particle background, model performance visualizations, a classifier tool, and a persistent local AI chatbot for guidance and QA."}
        ];

        function loadKB(){
            try{
                const raw = localStorage.getItem(STORAGE_KEY);
                if(!raw) { localStorage.setItem(STORAGE_KEY, JSON.stringify(seedKB)); return seedKB.slice(); }
                return JSON.parse(raw);
            }catch(e){ localStorage.removeItem(STORAGE_KEY); localStorage.setItem(STORAGE_KEY, JSON.stringify(seedKB)); return seedKB.slice(); }
        }
        function saveKB(kb){ localStorage.setItem(STORAGE_KEY, JSON.stringify(kb)); }

        let KB = loadKB();

        function tokenize(s){ return s.toLowerCase().replace(/[^\w\s]/g,'').split(/\s+/).filter(Boolean); }
        function tfVector(tokens){ const m=new Map(); tokens.forEach(t=>m.set(t,(m.get(t)||0)+1)); return m; }
        function cosine(a,b){ let dot=0,na=0,nb=0; for(const [k,v] of a){ na+=v*v; if(b.has(k)) dot += v*b.get(k) || 0; } for(const v of b.values()) nb+=v*v; return (na===0||nb===0)?0:dot/(Math.sqrt(na)*Math.sqrt(nb)); }
        function trained(){ return KB.map(i=>({raw:i, vec: tfVector(tokenize(i.q + " " + (i.a||"")))})); }

        function answerQuestion(text){
            const t = text.trim();
            if(!t) return "Please ask a question.";
            if(t.includes('|')){
                const [q,a] = t.split('|').map(s=>s.trim()).filter(Boolean);
                if(q && a){ KB.push({q,a}); saveKB(KB); return "Added FAQ pair and saved to local storage."; }
                return "Training format: question|answer";
            }
            const qvec = tfVector(tokenize(t));
            const scored = trained().map(ti=>({s: cosine(qvec, ti.vec), a: ti.raw.a, q: ti.raw.q}));
            scored.sort((a,b)=>b.s-a.s);
            if(scored[0] && scored[0].s > 0.06) return scored[0].a;
            return "No confident answer. Try asking about model metrics, dataset, 'how to add a logo', or add a KB FAQ using: question|answer";
        }

        // UI wiring (same selectors as before)
        const toggleBtn = document.getElementById('chat-toggle');
        const panel = document.getElementById('chat-panel');
        const sendBtn = document.getElementById('chat-send');
        const input = document.getElementById('chat-input');
        const history = document.getElementById('chat-history');
        const EXPORT_KEY = 'exop_kb_export';

        toggleBtn.addEventListener('click', () => {
            panel.classList.toggle('hidden');
            if(!panel.classList.contains('hidden')) { input.focus(); }
        });

        function appendMessage(who, text){
            const el = document.createElement('div');
            el.className = 'flex';
            el.innerHTML = `<div class="py-1 px-2 rounded ${who==='user'?'bg-sky-700 self-end':'bg-gray-800'}">${text}</div>`;
            el.style.whiteSpace = 'pre-wrap';
            history.appendChild(el);
            history.scrollTop = history.scrollHeight;
        }

        sendBtn.addEventListener('click', () => {
            const v = input.value.trim(); if(!v) return;
            appendMessage('user', v);
            input.value = '';
            setTimeout(()=>{ appendMessage('bot', answerQuestion(v)); }, 200);
        });
        input.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') sendBtn.click(); });
    })();
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('interactive-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const cursor = document.getElementById('cursor');
            let mouse = { x: null, y: null, radius: (canvas.width / 10) };
            let particlesArray = [];

            // --- EXPANDED ASSET LIBRARY ---
            const astronautSVG = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:rgb(255,255,255);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(180,180,255);stop-opacity:1" /></linearGradient></defs><g transform="rotate(20 30 30)"><path d="M30 6 C19.5 6 11 14.5 11 25 C11 35.5 19.5 44 30 44 C40.5 44 49 35.5 49 25 C49 14.5 40.5 6 30 6 Z" fill="url(#grad)" stroke="#fff" stroke-width="1"/><path d="M18 20 C16 20 15 22 16 23.5 C19 28 22 30 30 30 C38 30 41 28 44 23.5 C45 22 44 20 42 20 Z" fill="#000010" opacity="0.8"/><ellipse cx="23" cy="24" rx="2" ry="3" fill="#fff" opacity="0.3"/><path d="M20,38 A15,15 0 0,0 40,38 L42,54 L18,54 Z" fill="#fff" stroke="#ccc" stroke-width="0.5"/><path d="M10,30 A5,5 0 0,0 5,35 L2,45 L12,42 Z" fill="#fff" stroke="#ccc" stroke-width="0.5"/><path d="M50,30 A5,5 0 0,1 55,35 L58,45 L48,42 Z" fill="#fff" stroke="#ccc" stroke-width="0.5"/></g></svg>`)}`;
            const planetSVG1 = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="p1Grad" cx="30%" cy="30%" r="70%"><stop offset="0%" stop-color="#f9a8d4"/><stop offset="100%" stop-color="#be185d"/></radialGradient></defs><circle cx="50" cy="50" r="40" fill="url(#p1Grad)"/><ellipse cx="50" cy="50" rx="60" ry="15" fill="none" stroke="#fbcfe8" stroke-width="3" transform="rotate(-20 50 50)"/></svg>`)}`;
            const planetSVG2 = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="p2Grad" cx="70%" cy="30%" r="70%"><stop offset="0%" stop-color="#67e8f9"/><stop offset="100%" stop-color="#0e7490"/></radialGradient></defs><circle cx="50" cy="50" r="35" fill="url(#p2Grad)"/><path d="M 20 50 A 30 30 0 0 0 80 50" fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="2"/><path d="M 20 50 A 30 30 0 0 1 80 50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="2"/></svg>`)}`;
            const nebulaSVG = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><defs><filter id="blurFilter"><feGaussianBlur in="SourceGraphic" stdDeviation="5" /></filter><radialGradient id="nebulaGrad"><stop offset="0%" stop-color="rgba(217, 70, 239, 0.8)" /><stop offset="100%" stop-color="rgba(56, 189, 248, 0)" /></radialGradient></defs><circle cx="100" cy="100" r="80" fill="url(#nebulaGrad)" filter="url(#blurFilter)"/></svg>`)}`;
            const rocketSVG = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><g transform="rotate(45 50 50)"><path d="M50 10 L60 30 L40 30 Z" fill="#f0f0f0"/><rect x="40" y="30" width="20" height="40" fill="#c0c0c0"/><path d="M40 70 L30 90 L40 80 Z" fill="orange"/><path d="M60 70 L70 90 L60 80 Z" fill="orange"/><circle cx="50" cy="50" r="8" fill="#67e8f9" stroke="white" stroke-width="2"/></g></svg>`)}`;
            const asteroidSVG = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><radialGradient id="astGrad"><stop offset="0%" stop-color="#8c8c8c"/><stop offset="100%" stop-color="#595959"/></radialGradient></defs><path d="M 20 50 C 10 20, 40 10, 50 20 S 90 30, 80 50 S 90 90, 50 80 S 30 80, 20 50 Z" fill="url(#astGrad)"/></svg>`)}`;
            const satelliteSVG = `data:image/svg+xml;base64,${btoa(`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M 40 40 L 60 40 L 60 60 L 40 60 Z" fill="#c0c0c0"/><path d="M 10 30 L 40 40 L 40 20 Z" fill="#0e7490"/><path d="M 90 70 L 60 60 L 60 80 Z" fill="#0e7490"/><line x1="50" y1="60" x2="50" y2="90" stroke="#f0f0f0" stroke-width="3"/></svg>`)}`;

            class Particle {
                constructor(x, y, size, color, image = null, velX, velY) {
                    this.x = x; this.y = y;
                    this.size = size; this.color = color;
                    this.density = (Math.random() * 40) + 5;
                    this.directionX = velX !== undefined ? velX : (Math.random() * 0.4) - 0.2;
                    this.directionY = velY !== undefined ? velY : (Math.random() * 0.4) - 0.2;
                    this.image = image ? new Image() : null;
                    if(this.image) this.image.src = image;
                }
                draw() {
                    let drawX = this.x;
                    let drawY = this.y - window.scrollY;
                    if (this.image) {
                        ctx.globalAlpha = 0.8;
                        ctx.drawImage(this.image, drawX - this.size, drawY - this.size, this.size * 2, this.size * 2);
                        ctx.globalAlpha = 1;
                    } else {
                        ctx.fillStyle = this.color;
                        ctx.beginPath();
                        ctx.arc(drawX, drawY, this.size, 0, Math.PI * 2);
                        ctx.closePath();
                        ctx.fill();
                    }
                }
                update() {
                    // Intrinsic motion
                    this.x += this.directionX;
                    this.y += this.directionY;

                    // Mouse repulsion
                    if (mouse.x && mouse.y) {
                        let dx = mouse.x - this.x;
                        let dy = (mouse.y + window.scrollY) - this.y; // Correctly calculate distance
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < mouse.radius) {
                            let forceDirectionX = dx / distance;
                            let forceDirectionY = dy / distance;
                            let maxDistance = mouse.radius;
                            let force = (maxDistance - distance) / maxDistance;
                            let moveX = forceDirectionX * force * this.density;
                            let moveY = forceDirectionY * force * this.density;
                            this.x -= moveX;
                            this.y -= moveY;
                        }
                    }
                    
                    // Boundary check (wrapping for a scrollable page)
                    let pageHeight = document.body.scrollHeight;
                    if (this.x > canvas.width + this.size) this.x = -this.size;
                    if (this.x < -this.size) this.x = canvas.width + this.size;
                    if (this.y > pageHeight + this.size) this.y = -this.size;
                    if (this.y < -this.size) this.y = pageHeight + this.size;
                }
            }

            function init() {
                particlesArray = [];
                const isMobile = canvas.width < 768;
                let numberOfParticles = isMobile ? 150 : 400;
                let contentHeight = document.body.scrollHeight;
                for (let i = 0; i < numberOfParticles; i++) {
                    let size = Math.random() * 1.5 + 0.5;
                    let x = Math.random() * canvas.width;
                    let y = Math.random() * contentHeight;
                    const colors = ['rgba(255,255,255,0.8)', 'rgba(191, 219, 254, 0.8)', 'rgba(233, 213, 255, 0.8)'];
                    particlesArray.push(new Particle(x, y, size, colors[Math.floor(Math.random() * colors.length)]));
                }
                
                particlesArray.push(new Particle(canvas.width * 0.1, contentHeight * 0.1, 50, '', astronautSVG, 0.1, -0.05));
                particlesArray.push(new Particle(canvas.width * 0.9, contentHeight * 0.9, 50, '', astronautSVG, -0.08, -0.12));
                particlesArray.push(new Particle(canvas.width * 0.8, contentHeight * 0.3, 70, '', planetSVG1, -0.1, 0.08));
                particlesArray.push(new Particle(canvas.width * 0.2, contentHeight * 0.7, 60, '', planetSVG2, 0.05, -0.1));
                particlesArray.push(new Particle(canvas.width * 0.7, contentHeight * 0.5, 40, '', rocketSVG, -0.3, 0.2));
                particlesArray.push(new Particle(canvas.width * 0.5, contentHeight * 0.5, 150, '', nebulaSVG, 0.02, 0.02));
                particlesArray.push(new Particle(canvas.width * 0.8, contentHeight * 0.1, 30, '', asteroidSVG, -0.2, 0.25));
                particlesArray.push(new Particle(canvas.width * 0.3, contentHeight * 0.9, 25, '', asteroidSVG, 0.25, -0.2));
                particlesArray.push(new Particle(canvas.width * 0.1, contentHeight * 0.5, 45, '', satelliteSVG, 0.15, 0.15));
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for(let i = 0; i < particlesArray.length; i++){
                    particlesArray[i].update(); // Update all particles regardless of visibility
                    // Only draw particles that are visible on screen
                    let particleScreenY = particlesArray[i].y - window.scrollY;
                    if(particleScreenY > -particlesArray[i].size * 2 && particleScreenY < canvas.height + particlesArray[i].size * 2){
                        particlesArray[i].draw();
                    }
                }
                requestAnimationFrame(animate);
             }

            new Chart(document.getElementById('datasetChart').getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['Confirmed', 'Candidate', 'False Positive'],
                    datasets: [{
                        data: [2317, 2458, 4867],
                        backgroundColor: ['rgba(74, 222, 128, 0.7)', 'rgba(251, 191, 36, 0.7)', 'rgba(248, 113, 113, 0.7)'],
                        borderColor: [ '#4ade80', '#fbbf24', '#f87171'], borderWidth: 1
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false, labels: { color: 'white' } } } }
            });

            // --- MOUSE & RESIZE LISTENERS ---
            window.addEventListener('mousemove', e => {
                mouse.x = e.clientX; 
                mouse.y = e.clientY;
                cursor.style.left = `${e.clientX}px`;
                cursor.style.top = `${e.clientY}px`;
            });
            window.addEventListener('mousedown', () => cursor.classList.add('active'));
            window.addEventListener('mouseup', () => cursor.classList.remove('active'));
            window.addEventListener('resize', () => {
                canvas.width = innerWidth; canvas.height = innerHeight;
                mouse.radius = (canvas.width / 10);
                // Re-initialize particles on resize to account for new page height
                setTimeout(init, 100); 
            });
            window.addEventListener('mouseout', () => { mouse.x = undefined; mouse.y = undefined; });
            
            // Initial call after a short delay to let the page render and get correct scrollHeight
            setTimeout(() => {
                init();
                animate();
            }, 100);
        });
    </script>
</body>
</html>

